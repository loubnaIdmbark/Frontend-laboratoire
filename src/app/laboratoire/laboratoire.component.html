<head>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<div class="sidebar" [class.collapsed]="isSidebarCollapsed">
  <button class="toggle-btn" (click)="toggleSidebar()">
    <i class="fas" [ngClass]="isSidebarCollapsed ? 'fa-chevron-right' : 'fa-chevron-left'"></i>
  </button>
  <h3 *ngIf="!isSidebarCollapsed">Menu</h3>
  <ul>
    <li>
      <a
        href="#"
        [class.active]="activeMenu === 'home'"
        (click)="activeMenu = 'home'">
        <i class="fas fa-home"></i> <span *ngIf="!isSidebarCollapsed">Accueil</span>
      </a>
    </li>
    <li>
      <a
        href="#"
        [class.active]="activeMenu === 'labs'"
        (click)="activeMenu = 'labs'">
        <i class="fas fa-flask"></i> <span *ngIf="!isSidebarCollapsed">Laboratoires</span>
      </a>
    </li>
  </ul>
</div>

<!-- Contenu principal -->
<div class="main-content">




  <!-- Barre de recherche -->
  <div class="search-bar">
    <input
      type="text"
      placeholder="Rechercher un laboratoire par nom..."
      [(ngModel)]="searchQuery"
      (input)="filterLaboratoires()"
    />
  </div>
  <div *ngIf="filteredLaboratoires.length === 0" class="no-results">
    Aucun laboratoire trouvé pour "{{ searchQuery }}".
  </div>
<!-- Contenu principal -->


  <div class="modal" [ngClass]="{ 'show': isModalVisible }">
    <div class="modal-content">
      <h2>Ajouter un laboratoire</h2>
      <button class="close-modal" (click)="toggleModal()">X</button>
      <form [formGroup]="laboratoireForm" (ngSubmit)="onSubmit()">
        <div class="form-row">
          <label for="nom">Nom :</label>
          <input id="nom" formControlName="nom" type="text" placeholder="Nom du laboratoire">
        </div>
        <div class="form-row">
          <label for="nrc">NRC :</label>
          <input id="nrc" formControlName="nrc" type="text" placeholder="Numéro NRC">
        </div>
        <div class="form-row">
          <label for="logo">Logo :</label>
          <input id="logo" type="file" (change)="onFileChange($event)" />
        </div>
        <div class="form-row">
          <label for="dateActivation">Date d'activation :</label>
          <input id="dateActivation" formControlName="dateActivation" type="date">
        </div>
        <div class="form-row">
          <label for="active">Actif :</label>
          <input id="active" formControlName="active" type="checkbox">
        </div>
        <button type="submit" [disabled]="!laboratoireForm.valid">Enregistrer</button>
      </form>
    </div>
  </div>

  <!-- Liste des laboratoires -->
  <!-- Liste des laboratoires -->
  <div class="card-container">
    <div *ngFor="let laboratoire of filteredLaboratoires" class="card" (click)="toggleDetails(laboratoire)">
      <img *ngIf="laboratoire.logo" [src]="laboratoire.logo" alt="Logo du laboratoire" class="logo">
      <div class="card-content">
        <h3>{{ laboratoire.nom }}</h3>
      </div>
      <div *ngIf="selectedLaboratoire === laboratoire" class="card-details">
        <p><strong>NRC :</strong> {{ laboratoire.nrc }}</p>
        <p><strong>Actif :</strong> {{ laboratoire.active ? 'Oui' : 'Non' }}</p>
        <p><strong>Date d'Activation :</strong> {{ laboratoire.dateActivation | date: 'dd/MM/yyyy' }}</p>
        <button (click)="archiverLaboratoire(laboratoire.id)" class="archive-btn">Archiver</button>
      </div>
    </div>

    <!-- Carte d'ajout (symbole +) -->
    <div class="card add-card" (click)="toggleModal()">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
      <div class="card-content">
        Ajouter un laboratoire<br><br>
        <i class="fas fa-plus"></i>
      </div>
    </div>
  </div>


</div>
